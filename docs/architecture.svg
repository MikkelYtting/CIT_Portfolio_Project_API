<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="420" viewBox="0 0 900 420">
  <style>
    .box { fill:#f8f9fa; stroke:#333; stroke-width:1.2px; }
    .title { font: 14px sans-serif; font-weight: bold; }
    .text { font: 12px sans-serif; }
    .arrow { stroke:#333; stroke-width:1.2px; marker-end: url(#arrowhead); }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Controllers -->
  <rect class="box" x="40" y="30" width="200" height="80" rx="6"/>
  <text class="title" x="60" y="52">Web Layer</text>
  <text class="text" x="60" y="72">Controllers (API endpoints)</text>
  <text class="text" x="60" y="88">/api/movies, /api/users/...</text>

  <!-- Managers -->
  <rect class="box" x="320" y="30" width="230" height="80" rx="6"/>
  <text class="title" x="340" y="52">Business Layer</text>
  <text class="text" x="340" y="72">Managers / Services</text>
  <text class="text" x="340" y="88">Add HATEOAS, pagination, mapping</text>

  <!-- Repositories -->
  <rect class="box" x="600" y="30" width="230" height="80" rx="6"/>
  <text class="title" x="620" y="52">Data Access Layer</text>
  <text class="text" x="620" y="72">Repositories (IMovieRepository)</text>
  <text class="text" x="620" y="88">EF Core / SQL calls / functions</text>

  <!-- arrows controllers -> managers -> repos -->
  <line class="arrow" x1="240" y1="70" x2="320" y2="70" />
  <line class="arrow" x1="550" y1="70" x2="600" y2="70" />

  <!-- DbContext / Entities below -->
  <rect class="box" x="320" y="150" width="510" height="120" rx="6"/>
  <text class="title" x="340" y="172">Persistence</text>
  <text class="text" x="340" y="192">AppDbContext (DbSet&lt;Movie&gt;, DbSet&lt;User&gt;...)</text>
  <text class="text" x="340" y="208">Entities: Movie, Person, Rating, UserBookmark, ...</text>

  <!-- arrow repos -> dbcontext -->
  <line class="arrow" x1="715" y1="110" x2="715" y2="150" />

  <!-- DTOs box -->
  <rect class="box" x="40" y="200" width="230" height="140" rx="6"/>
  <text class="title" x="60" y="222">DTOs / Contracts</text>
  <text class="text" x="60" y="242">MovieDto, PersonDto, PageDto, LinkDto</text>
  <text class="text" x="60" y="258">Used between Managers & Controllers</text>

  <!-- mapping arrow -->
  <line class="arrow" x1="260" y1="260" x2="320" y2="170" />

  <!-- footer note -->
  <text class="text" x="40" y="370">Simple architecture overview for documentation: Controllers → Managers → Repositories → AppDbContext (Entities). DTOs used as outer-facing contracts.</text>
</svg>
